<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sofency.ssm.mapper.FameCustomMapper">
	<!-- 查询荣誉列表和荣誉获取者的姓名 -->
<!--	<cache  type="org.mybatis.caches.ehcache.EhcacheCache"/> -->
	<resultMap id="BaseResultMap" type="com.sofency.ssm.pojo.Fame">
		<!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Mar 30 20:44:51 CST 2020.
        -->
		<id column="fame_id" jdbcType="INTEGER" property="fameId" />
		<result column="fame_level" jdbcType="INTEGER" property="fameLevel" />
		<result column="fame_name" jdbcType="VARCHAR" property="fameName" />
		<result column="fame_description" jdbcType="VARCHAR" property="fameDescription" />
	</resultMap>

	<resultMap id="fameCustomDemo" type="com.sofency.ssm.pojo.FameCustom" extends="BaseResultMap">
		<result property="engineerId" column="engineer_id" jdbcType="INTEGER"/>
		<result property="engineerName" column="engineer_name" jdbcType="VARCHAR"/>
		<result property="getTime"  column="get_time" jdbcType="TIMESTAMP" />
	</resultMap>
	
  <select id="getFameInfoList" resultMap="fameCustomDemo">
  		 select fame.fame_id,fame.fame_name,fame.fame_level,engineer_name,getfame.get_time,getfame.engineer_id
				from fame
					join getfame on fame.fame_id=getfame.fame_id
					join engineer on getfame.engineer_id =engineer.engineer_id
  </select>

	<select id="getFameInfo" parameterType="com.sofency.ssm.pojo.FameCustom" resultMap="fameCustomDemo">
		select fame.fame_id,fame.fame_name,
      		 fame.fame_level,engineer_name,
      		 getfame.get_time,getfame.engineer_id
			from engineer  join getfame on engineer.engineer_id=getfame.engineer_id
                    and getfame.engineer_id=#{engineerId}
                    join fame on getfame.fame_id=fame.fame_id
                    and getfame.fame_id=#{fameId}
	</select>
</mapper>
